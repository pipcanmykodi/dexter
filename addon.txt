sport =0
site = 0
import base64
pipcan = base64.b64decode
import time,xbmcaddon,os,requests,xbmc,xbmcgui,urllib,urllib2,re,xbmcplugin,sys
pluginname = 'dex'
e= 'plugin.video.%s'%(pluginname)
o = xbmcaddon.Addon(id=e)
l01 = o.getSetting(pipcan('a2FzdXRhamFuaW1p'))
username = o.getSetting(pipcan('a2FzdXRhamFuaW1p'))
contest = o.getSetting(pipcan('a2FzdXRhamFuaW1p'))
l10 = o.getSetting(pipcan('c2FsYXNvbmE='))
password = o.getSetting(pipcan('c2FsYXNvbmE='))
cats = o.getSetting(pipcan('Y2F0cw=='))
box = o.getSetting('box')
pvr = o.getSetting('pvr')
pvr2 = o.getSetting('pvr2')
dialog = xbmcgui.Dialog()
site = 'dexonline.ninja:8000'
players=['IPTV Simple Client','[COLOR yellow]New[/COLOR] Dexter TVGuide','I Dont Use A Guide']
def firststart():
	if pvr2 == 'false':
		dialog.ok('Setup Guide','Please Select What Guide You Wish To Use')
		ret = dialog.select('Select Your Guide',players)
		o.setSetting('pvr','%s'%ret)
		o.setSetting('pvr2','true')
		check()
	else:
		check()
def errors():
			dialog.ok('Error!!','Seems Your Username And Password Is Wrong')
def check():
	url = 'http://%s/panel_api.php?username=%s&password=%s&type=get_live_categories'%(site,username,password)
	r = requests.get(url)
	match = re.compile('"auth":(.+?)').findall(r.content)
	for result in match:
		if "1" in result:
			starts()
		else:
			dialog.ok('Error!!','Seems Your Username And Password Is Wrong')
def choose():
	option = dialog.select('Ok Choose You Player',players)
	if option == 0:
		iptvsimpleclient()
	if option == 1:
		check()
	if option == 2:
		tvguide()
def ini():
	url = 'http://dexonline.ninja:8000/get.php?username=pipcan&password=nosessss&type=m3u_plus&output=hls'
	r = requests.get(url)
	print '[plugin.video.dex]'
	match = re.compile(',(.+?)\B\n(.+?)\r').findall(r.content)
	for name,url in match:
		print name.replace('\r','')+'='+url

def sports(url):
	grays2('[B][[/B] NBA [B]][/B] Center Court','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=239'%(site,username,password),22,'','','')
	grays2('[B][[/B] NFL [B]][/B] Sunday Ticket','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=31'%(site,username,password),22,'','','')
	grays2('[B][[/B] NHL [B]][/B] Center Ice','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=238'%(site,username,password),22,'','','')
	grays2('[B][[/B] MLB [B]][/B] Extra Innings','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=385'%(site,username,password),22,'','','')
	grays2('[B][[/B] More [B]][/B] Sports','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=338'%(site,username,password),22,'','','')
	grays('[B][[/B]Sports[B]][/B] Fixtures','hg',101,'','','')


def rec(pillow,url,fanart):
	searchStr = ''
	counting = ''
	keyboard = xbmc.Keyboard(searchStr, 'Give Your Recording A Name')
	keyboard.doModal()
	if (keyboard.isConfirmed()==False):
	  return
	searchStr=keyboard.getText()
	keyboard = xbmc.Keyboard(counting, 'How Long Do You Want To Record For')
	keyboard.doModal()
	if (keyboard.isConfirmed()==False):
	  return
	counting=keyboard.getText()
	Dialog = xbmcgui.DialogProgress()
	Dialog.create('Record','Recording %s Has Started'%(searchStr))
	import subprocess
	p = subprocess.Popen('ffmpeg -t 00:00:%s -i %s -strict -2 /home/pipcan/Documents/%s.mp4 -y'%(counting,url,searchStr), shell=True, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)
	count = int(counting)
	Dialog.update(100,'Timer','Left %s'%(count))
	while True:
		time.sleep(1)
		Dialog.update(count,'Time Left %s'%(count),'Time Remaining ss')
		if count < 0:
			Dialog.close()
			dialog.ok('Record','Recording Has Finished')
			return
		else:
			count -= 1




def starts():

	grays2('--------------------------------[ [COLOR orange]Dexter Pro[/COLOR] ]----------------------------','http://137.74.94.109:25461/get.php?username=kids&password=kids&type=m3u_plus&output=m3u8',35,'1','1','QUICKEPG')
	grays2('[B][[/B] 247 [B]][/B] Shows','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=18'%(site,username,password),22,'','','')
	grays2('[B][[/B] PPV [B]][/B] Events','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=115'%(site,username,password),22,'','','')
	grays2('[B][[/B] Live [B]][/B] Tv','http://%s/enigma2.php?username=%s&password=%s&type=get_vod_categories'%(site,username,password),24,'','','')
	grays2('[B][[/B] Live [B]][/B] Sports','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=31'%(site,username,password),29,'','','')
	grays2('[B][[/B] Web [B]][/B] Youtube/Twitch','http://%s/enigma2.php?username=%s&password=%s&type=get_live_streams&cat_id=382'%(site,username,password),22,'','','')
	grays2('[B][[/B] On [B]][/B] Demand','ss',55,'','','')
	grays('[COLOR yellow]TV Guide[/COLOR]','QUICKEPG',100,'QUICKEPG','QUICKEPG','QUICKEPG')
#	for active in match:
#		if active == 'NO':
#			continue
#		else:
#			r2 = requests.get('http://pastebin.com/raw/dBhn0YLQ')
#			match2 = re.compile('\'(.+?)\'').findall(r2.content)
#			for match3 in match2:
#				grays('[B]Enter Contest[/B] %s'%(match3),'http://%s/enigma2.php?username=%s&password=%s&type=get_vod_categories'%(site,username,password),99,'','','')
def news():
	grays2('[COLOR brown]** More News Click Here **[/COLOR]','http://pastebin.com/raw/dMcPdkp7',85,'g','','')
	grays('[COLOR yellow]Not Always Live[/COLOR]','',85,'','','')
	url = 'http://pastebin.com/raw/WJ0WH27j'
	r = requests.get(url)
	match = re.compile('#EXTINF:0 group-title="(.+?)"').findall(r.content)
	for group in set(match):
		grays2(group,'http://pastebin.com/raw/dMcPdkp7',85,group,'','')
def news2(iconimage):
	if iconimage == 'g':
		url = 'http://pastebin.com/raw/dMcPdkp7'
		r = requests.get(url)
		match = re.compile('#EXTINF:.+?,(.+?)\n(.+?)\r').findall(r.content)
		for name,url2 in set(match):
				grays(name,url2,84,url2,'','')
		match2 = re.compile('#EXTINF:-1,(.+?)\n(.+?)\n').findall(r.content)
		for name2,url22 in set(match2):
				grays(name2,url22,84,'http'+url22,'','')
		xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )	

	else:
		url = 'http://pastebin.com/raw/dMcPdkp7'
		r = requests.get(url)
		match = re.compile('#EXTINF:0 group-title="(.+?)",(.+?)\n(.+?)\r').findall(r.content)
		for group,name,url2 in set(match):
			if group == iconimage:
				grays(name,url2,84,url2,'','')
		xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )	
def cat():
	url = 'http://%s/enigma2.php?username=%s&password=%s&type=get_live_categories'%(site,username,password)
	r = requests.get(url)
	match = re.compile('<title>(.+?)</title>.+?<!\[CDATA\[(.+?)]]>').findall(r.content)
	for name,url in match:
		name = pipcan(name)
		if 'All' in name:
			grays2(name,url,22,'','http://localhost:52307/getpvrthumb&title=%s'%(name),'')
		elif 'AS' in name:
			grays2(name,url,22,'','http://localhost:52307/getpvrthumb&title=%s'%(name),'')
		elif 'UK' in name:
			grays2(name+' Channels',url,22,'','http://localhost:52307/getpvrthumb&title=%s'%(name),'')
		elif 'US' in name:
			grays2(name,url,22,'','http://localhost:52307/getpvrthumb&title=%s'%(name),'')
	grays2('Radio Stations','s',8866,'','http://localhost:52307/getpvrthumb&title=','')
	grays2('Local News','ss',54,'','','')
def ondemandchannels():
	grays2('Video On Demand','http://%s/enigma2.php?username=%s&password=%s&type=get_vod_categories'%(site,username,password),23,'','','')
	grays2('Sky Sports News','hg',1001,'','','')
	grays2('Sports Catch Up','s',2320,'','','')
	grays2('UKTVNow','hg',1004,'','','')
	grays2('Kids Corner','http://137.74.94.109:25461/get.php?username=kids&password=kids&type=m3u_plus&output=m3u8',35,'1','1','QUICKEPG')
	grays2('[COLOR yellow]More Coming Soon[/COLOR]','hg',1001,'','','')

def uktvnow():
	url = 'http://vschedules.uktv.co.uk/mapi/browse/?format=json'
	r = requests.get(url)
	match = re.compile('description": "(.+?)".+?"image": "(.+?)".+?"id": (.+?), "channel": "(.+?)", "name": "(.+?)"').findall(r.content)
	for description,image,ids,channel,name in match:
		grays2(name+' - '+channel,'http://vschedules.uktv.co.uk/mapi/branddata/?format=json&brand_id=%s'%ids,1003,image,image,description)
	xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )
def uktvnow2(url):
	r = requests.get(url)
	match = re.compile('{"brightcove_video_id": (.+?), "episode_txt": "(.+?)".+?"episode_img_cached": "(.+?)", "title": "(.+?)"').findall(r.content)
	for brightcove,episode,image,title in match:
		grays('Episode %s'%(episode),'http://c.brightcove.com/services/mobile/streaming/index/master.m3u8?videoId=%s'%brightcove,84,image,image,title)
	xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )	
def vod(url):
	url = 'http://dexonline.ninja:8000/player_api.php?username=%s&password=%s&action=get_vod_categories'%(username,password)
	r = requests.get(url)
	match = re.compile('{"category_id":"(.+?)","category_name":"(.+?)","parent_id":0}').findall(r.content)
	for ids,name in match:
			grays2('%s'%(name.replace(name,'[COLOR white]%s[/COLOR]'%name)),ids,884,'http://localhost:52307/getpvrthumb&title=%s'%(name),'http://localhost:52307/getpvrthumb&title=%s'%(name),'')
	xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )
	xbmcplugin.setContent(int(sys.argv[1]), pipcan('bW92aWVz'))
def vod2(url):
	url2 = 'http://dexonline.ninja:8000/player_api.php?username=%s&password=%s&action=get_vod_categories'%(username,password)
	r = requests.get(url2)
	match = re.compile('{"category_id":"(.+?)","category_name":"(.+?)","parent_id":"(.+?)"}').findall(r.content)
	for ids,name,parent in match:
		if parent == url:
			grays2(name,ids,3655,'http://localhost:52307/getpvrthumb&title=%s'%(name),'http://localhost:52307/getpvrthumb&title=%s'%(name),'')
def vod3(url):
	url = 'http://dexonline.ninja:8000/player_api.php?username=%s&password=%s&action=get_vod_streams&category_id=%s'%(username,password,url)
	r = requests.get(url)
	match=re.compile('"name":"(.+?)","stream_type":"movie","stream_id":"(.+?)".+?ategory_id":".+?container_extension":"(.+?)"').findall(r.content)
	for name,stream,extent in match:
		grays(name,'http://dexonline.ninja:8000/movie/%s/%s/%s.%s'%(username,password,stream,extent),84,'http://localhost:52307/getpvrthumb&title=%s'%(name),'','')
def lives(url):
	url = reqests.get('http://dexonline.ninja:8000/player_api.php?username=%s&password=%s&action=get_live_streams&category_id=%s','')

def fav(url): 
	import urlresolver
	play=xbmc.Player()
	url=urlresolver.HostedMediaFile(url).resolve()
	play.play(url)
def menu(url):

	r = requests.get(url)
	match = re.compile('<title>(.+?)<.+?>(.+?)<.+?<!\[CDATA\[(.+?)\].+?\[CDATA\[(.+?)\]').findall(r.content)
	for name,description,icon,url in match:
		name = pipcan(name)
		icon = icon.replace('[','\n[')
		description = description.replace('<description>','')
		description = pipcan(description)
		if '[' in name:
				name2 = name.split('[')
				name3 = name.split('min')
				description = description.split('\n(')
				grays3('[COLOR white][B]%s[/B][/COLOR] - [COLOR grey][I]%s[/I][/COLOR]- [COLOR grey][I]%s[/I][/COLOR]'%(name2[0],description[0],description[1].replace('\n','').replace(')','')),url,4,icon,'http://localhost:52307/getpvrthumb&title=%s&fallback=%s'%(name2[0],icon),('[B]%s[/B]\n[COLOR white]Now: [/COLOR][COLOR yellow]%s[/COLOR]\n[COLOR white]Description: [/COLOR][COLOR yellow]%s[/COLOR]\n'%(name2[0],description[0],description[1].replace('[','[COLOR white]Next:[/COLOR]['))))
		else:
			grays3('[COLOR white][B]%s[/B][/COLOR]'%(name),url,4,icon,'http://localhost:52307/getpvrthumb&title=%s&fallback=%s'%(name,icon),name)
	xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )
	xbmcplugin.setContent(int(sys.argv[1]), 'movies')
def skysports():
	url = 'http://skysports.com/watch/video'
	r = requests.get(url.replace('/more/2',''))
	match = re.compile('class="page-nav__link.+?>(.+?)</a>').findall(r.content)
	for name in match:
		grays2(name,'http://skysports.com/watch/video/sports/%s'%(name.lower().replace(' ','-')),1002,'','','')
def skysports2(url):
	r = requests.get(url)
	url2 = url
	match = re.compile('data-src="(.+?)\.jpg\?.+?".+?alt="(.+?)"',re.DOTALL).findall(r.content)
	for icon,name in match:
		icon2 = icon.split('/')
		grays(name,'http://video.skysports.com/%s/DOcJ-FxaFrRg4gtDEwOmk2OjBrO6qGv_?_=jq5zj61x7lkbts4rysyvi'%(icon2[6]),4,icon+'.jpg',icon+'.jpg',name)
	xbmcplugin.setContent(int(sys.argv[1]), 'movies')
	url3 = '%s/more/2'%(url2)
	grays2('Next Page',url3,1002,'','','')
def contest():
    try:
            dialog = xbmcgui.Dialog()
            if dialog.yesno('would you like to enter', 'would you like to enter','', "",'No','Yes'):
                url = 'http://dexonline.ninja/contest/check.php?myusername=%s&mypassword=%s'%(username,password)
                r = requests.get(url)
                match = re.compile('Entered: Your number is: (\d?\d?\d?\d?)').findall(r.content)
                match2 = re.compile('(.+?)').findall(r.content)
                for respond in match:
                    if respond:
                        dialog.ok('Keep Safe !!!','your number is %s'%respond)
                for respond2 in match2:
                    if respond2 == '"':
                        dialog.ok('Warning','You Have Already Entered')

            else:
                dialog.ok("You Pressed Close", " You Pressed Close    ")
    except:
        pass	
		
def guide():
	dialog = xbmcgui.Dialog()
	path = xbmc.translatePath( 'special://home/addons' )
	d = os.listdir(path)
	if 'script.mtvguide' in d:
		xbmc.executebuiltin("runScript(plugin://script.tvguide.tvguide2/?)")
	else:
		dialog.ok('Not Installed','Sorry You Dont Have The Guide Installed Please Go To My Kodi Then Programs And Select Dexter TV Guide')



    
def fixtures():
	dialog = xbmcgui.Dialog()
	path = xbmc.translatePath( 'special://home/addons' )
	d = os.listdir(path)
	if 'plugin.program.fixtures' in d:
		xbmc.executebuiltin('RunAddon(plugin.program.fixtures)')	
	else:
		dialog.ok('Not Installed','Sorry You Dont Have The Sports Fixtures Installed Please Go To My Kodi Then Programs And Select Sports Fixtures')


def c47(url,iconimage,fanart):
	name=[]
	urls=[]
	url = 'http://hostmybuild.com/guide/247.txt'
	r = requests.get(url)
	match = re.compile('(.+?)=(.+?)=').findall(r.content)
	for name2,urls2 in match:
		name.append(name2)
		urls.append(urls2)
	dialog = xbmcgui.Dialog()
	ret = dialog.select('Select A Station',name)
	if ret > 0:
		stream = urls[ret]
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,stream)
		play=xbmc.Player()
		play.play(stream)
	else:
		return
def PPVE(url,iconimage,fanart):
	name=[]
	urls=[]
	url = 'http://hostmybuild.com/guide/PPV.txt'
	r = requests.get(url)
	match = re.compile('(.+?)=(.+?)=').findall(r.content)
	for name2,urls2 in match:
		name.append(name2)
		urls.append(urls2)
	dialog = xbmcgui.Dialog()
	ret = dialog.select('Select A Station',name)
	if ret > 0:
		stream = urls[ret]
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,stream)
		play=xbmc.Player()
		play.play(stream)
	else:
		return
def NFL(url,iconimage,fanart):
	name=[]
	urls=[]
	url = 'http://hostmybuild.com/guide/NFL.txt'
	r = requests.get(url)
	match = re.compile('(.+?)=(.+?)=').findall(r.content)
	for name2,urls2 in match:
		name.append(name2)
		urls.append(urls2)
	dialog = xbmcgui.Dialog()
	ret = dialog.select('Select A Station',name)
	if ret > 0:
		stream = urls[ret]
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,stream)
		play=xbmc.Player()
		play.play(stream)
	else:
		return
def NHL(url,iconimage,fanart):
	name=[]
	urls=[]
	url = 'http://hostmybuild.com/guide/NHL.txt'
	r = requests.get(url)
	match = re.compile('(.+?)=(.+?)=').findall(r.content)
	for name2,urls2 in match:
		name.append(name2)
		urls.append(urls2)
	dialog = xbmcgui.Dialog()
	ret = dialog.select('Select A Station',name)
	if ret > 0:
		stream = urls[ret]
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,stream)
		play=xbmc.Player()
		play.play(stream)
	else:
		return
def NBA(url,iconimage,fanart):
	name=[]
	urls=[]
	url = 'http://hostmybuild.com/guide/NBA.txt'
	r = requests.get(url)
	match = re.compile('(.+?)=(.+?)=').findall(r.content)
	for name2,urls2 in match:
		name.append(name2)
		urls.append(urls2)
	dialog = xbmcgui.Dialog()
	ret = dialog.select('Select A Station',name)
	if ret > 0:
		stream = urls[ret]
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,stream)
		play=xbmc.Player()
		play.play(stream)
	else:
		return
def kidscorner(pillow,url,iconimage,description):
	grays2('[ [COLOR green]Kids Corner[/COLOR] ]','http://137.74.94.109:25461/get.php?username=kids&password=kids&type=m3u_plus&output=m3u8',35,'1','1','QUICKEPG')
	r = requests.get(url)
	match = re.compile('group-title="(.+?)"').findall(r.content)
	match2 = re.compile('group-title="(.+?)",(.+?)\n(.+?)\r').findall(r.content)
	if iconimage == '1':
		for name22 in set(match):
			grays2(name22.replace('.',' ').replace('_',' '),pipcan('aHR0cDovLzEzNy43NC45NC4xMDk6MjU0NjEvZ2V0LnBocD91c2VybmFtZT1raWRzJnBhc3N3b3JkPWtpZHMmdHlwZT1tM3VfcGx1cyZvdXRwdXQ9bTN1OA=='),35,'http://localhost:52307/getpvrthumb&title=%s'%name22,'http://localhost:52307/getpvrthumb&title=%s'%name22,name22)
		xbmcplugin.addSortMethod( handle=int( sys.argv[ 1 ] ), sortMethod=xbmcplugin.SORT_METHOD_TITLE )

		xbmcplugin.setContent(int(sys.argv[1]), '555')
	else:
		grays('Play All','hh',6668,'','','')
		for group,name2,url2 in match2:

			if group == description:
				grays(name2.replace('.',' ').replace('720','[COLOR gold]720[/COLOR]').replace('1080','[COLOR gold]1080[/COLOR]').replace('_',' ').replace(pillow,'[COLOR white][B]%s[/B][/COLOR] - '%pillow),url2,84,name2,'http://localhost:52307/getpvrthumb&title=%s'%(name2),name2)
	
def Kickoff(url,iconimage,fanart):
	name=[]
	urls=[]
	url = 'http://hostmybuild.com/guide/Kickoff.txt'
	r = requests.get(url)
	match = re.compile('(.+?)=(.+?)=').findall(r.content)
	for name2,urls2 in match:
		name.append(name2)
		urls.append(urls2)
	dialog = xbmcgui.Dialog()
	ret = dialog.select('Select A Station',name)
	if ret > 0:
		stream = urls[ret]
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,stream)
		play=xbmc.Player()
		play.play(stream)
	else:
		return
def playext(url,iconimage,fanart):
		stream = 'http://%s/live/%s/%s/%s.m3u8'%(site,username,password,url)
		play=xbmc.Player()
		play.play(stream)



def sportscatch():
	url = 'http://fullmatchtv.com'
	r = requests.get(url)
	match = re.compile('class="menu-item menu-item-type-post_type menu-item-object-page menu-item-\d\d\d\d"><a href="(.+?)">(.+?)</a></li>').findall(r.content)
	for url,name in match:
		grays2(name,url,88767,'','','')

def sportscatch2(url):
	r = requests.get(url)
	match = re.compile('"(.+?)" rel="bookmark" title="(.+?)"><img width=".+?" height=".+?" class="entry-thumb" src="(.+?)"').findall(r.content)
	for url,name,image in match:
		grays(name.replace('&#8211;',''),url,2002,image,image,'')
def fav22(url):
	url = url.replace('td-module-thumb"><a href="','')
	r = requests.get(url)
	match = re.compile('iframe src="(.+?)" scrolling="no" frameborder="0" width="100%" height="430" allowfullscreen="true" webkitallowfullscreen="true" mozallowfullscreen="true"></iframe>').findall(r.content)
	for url in match:
		fav(url)
def hello3(url):
		play=xbmc.Player()
		play.play(url)

def fav2(url,iconimage,fanart): 
	if box == 'false':
		xbmc.executebuiltin('ActivateWindow(12005)') 
	url = url.replace('.ts','.m3u8')
	play=xbmc.Player()
	play.play(url)
	if box == 'false':
		xbmc.executebuiltin('ActivateWindow(12005)') 
		pic = xbmc.executebuiltin('ShowPicture("%s")'%(iconimage))
		time.sleep(4.5)
		xbmc.executebuiltin('Action(back)') 
		time.sleep(1.0)
def countrys():
    url = 'http://streema.com/radios'
    r = requests.get(url)
    match = re.compile('<a href="/radios/region/(.+?)">').findall(r.content)
    for name in match:
        grays2(name,url+'/region/'+name,8867,'','','')
def listregion(url):
    r = requests.get(url)
    match = re.compile('<a href="/radios/country/(.+?)">').findall(r.content)
    for name in match:
        grays2(name,'http://streema.com/radios/%s'%(name),8868,'','','')
def stations(url):
    r = requests.get(url)
    match = re.compile('src="https://static-media.streema.com/media/(.+?)".+?alt="(.+?)".+?<span class="now-playing-text"(.+?)/span>',re.DOTALL).findall(r.content)
    for icon,name,now in match:
        if now =='><':
            icon = 'https://static-media.streema.com/media/%s'%(icon)
            grays2(name.replace(' Logo',''),'http://streema.com/radios/%s'%(name),8867,'','','')
        else:
            now = now.replace('<','').replace('>','')
            grays2('%s - [COLOR yellow]%s[/COLOR]'%(name.replace(' Logo',''),now),'http://streema.com/radios/%s'%(name),8867,'','','')
def get_params():
		param=[]
		paramstring=sys.argv[2]
		if len(paramstring)>=2:
				params=sys.argv[2]
				cleanedparams=params.replace('?','')
				if (params[len(params)-1]=='/'):
						params=params[0:len(params)-2]
				pairsofparams=cleanedparams.split('&')
				param={}
				for i in range(len(pairsofparams)):
						splitparams={}
						splitparams=pairsofparams[i].split('=')
						if (len(splitparams))==2:
								param[splitparams[0]]=splitparams[1]  
		return param
def grays(pillow,url,mode,iconimage,fanart,description):
		u=sys.argv[0]+"?url="+urllib.quote_plus(url)+"&mode="+str(mode)+"&pillow="+urllib.quote_plus(pillow)+"&iconimage="+urllib.quote_plus(iconimage)+"&fanart="+urllib.quote_plus(fanart)+"&description="+urllib.quote_plus(description)
		ok=True
		liz=xbmcgui.ListItem(pillow, iconImage="DefaultFolder.png", thumbnailImage=iconimage)
		liz.setInfo( type="Video", infoLabels={ "Title": pillow, "Plot": description } )
		liz.setProperty( "Fanart_Image", fanart )
		ok=xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]),url=u,listitem=liz,isFolder=False)
		return ok			
def grays2(pillow,url,mode,iconimage,fanart,description):
	u=sys.argv[0]+"?url="+urllib.quote_plus(url)+"&mode="+str(mode)+"&pillow="+urllib.quote_plus(pillow)+"&iconimage="+urllib.quote_plus(iconimage)+"&fanart="+urllib.quote_plus(fanart)+"&description="+urllib.quote_plus(description)
	ok=True
	liz=xbmcgui.ListItem(pillow, iconImage="DefaultFolder.png", thumbnailImage=iconimage)
	liz.setInfo( type="Video", infoLabels={ "Title": pillow, "Plot": description } )
	liz.setProperty( "Fanart_Image", fanart )
	ok=xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]),url=u,listitem=liz,isFolder=True)
	return ok 
def grays3(pillow,url,mode,iconimage,fanart,description):
	u=sys.argv[0]+"?url="+urllib.quote_plus(url)+"&mode="+str(mode)+"&pillow="+urllib.quote_plus(pillow)+"&iconimage="+urllib.quote_plus(iconimage)+"&fanart="+urllib.quote_plus(fanart)+"&description="+urllib.quote_plus(description)
	pillow2 = None
	pillow3 = None
	liz = xbmcgui.ListItem(pillow, iconImage="DefaultFolder.png", thumbnailImage=iconimage)
	liz.setInfo( type="Video", infoLabels={ "Title": pillow, "Plot": description } )
	liz.setProperty( "Fanart_Image", fanart )
	menu = []
	pillow = pillow.replace('[COLOR white]','').replace('[/COLOR]','').replace('[B]','').replace('[/B]','').replace('[COLOR grey]','')
	try:
		pillow2 = pillow.split('-')
		pillow3 = pillow2[1].replace('[','').replace(']','')
	except:
		pass
	menu.append(('[COLOR orange]Record [/COLOR]%s'%(pillow3),'XBMC.Container.Update(%s?mode=846&name=%s&url=%s&fanart=%s)'% (sys.argv[0],pillow,url,'20')))
	liz.addContextMenuItems(items=menu, replaceItems=True)	
	ok=xbmcplugin.addDirectoryItem(handle=int(sys.argv[1]),url=u,listitem=liz,isFolder=False)
 	return ok

params=get_params()
url=None
pillow=None
mode=None
iconimage=None
fanart=None
description=None
try:
		url=urllib.unquote_plus(params["url"])
except:
		pass
try:
		pillow=urllib.unquote_plus(params["pillow"])
except:
		pass
try:
		iconimage=urllib.unquote_plus(params["iconimage"])
except:
		pass
try:		
		mode=int(params["mode"])
except:
		pass
try:		
		fanart=urllib.unquote_plus(params["fanart"])
except:
		pass
try:		
		description=urllib.unquote_plus(params["description"])
except:
		pass
if mode==None or url==None or len(url)<1:
		firststart()

elif mode==3:
	exec pipcan('aGVsbG8odXJsKQ==')
elif mode==2:
	exec pipcan('aGVsbG8odXJsKQ==')
elif mode==2320:
		sportscatch()
elif mode==4:
	fav2(url,iconimage,fanart)
elif mode==40:
	c47(url,iconimage,fanart)
elif mode==42:
	PPVE(url,iconimage,fanart)
elif mode==43:
	NFL(url,iconimage,fanart)
elif mode==44:
	NHL(url,iconimage,fanart)
elif mode==45:
	NBA(url,iconimage,fanart)
elif mode==46:
	Kickoff(url,iconimage,fanart)
elif mode==88:
	playext(url,iconimage,fanart)
elif mode==5:
	fav(url)
elif mode==22:
	menu(url)
elif mode==23:
	vod(url)
elif mode==24:
	cat()
elif mode==99:
	contest()
elif mode==29:
	sports(url)
elif mode==100:
	guide()
elif mode==35:
	kidscorner(pillow,url,iconimage,description)
elif mode==36:
	kidsepisodes(url)
elif mode==101:
	fixtures()
elif mode==80:
	getdep()
elif mode==84:
	hello3(url)
elif mode==54:
	news()
elif mode==55:
	ondemandchannels()
elif mode==1001:
	skysports()
elif mode==1002:
	skysports2(url)
elif mode==85:
	news2(iconimage)
elif mode==1004:
	uktvnow()
elif mode==1003:
	uktvnow2(url)
elif mode==884:
	vod2(url)
elif mode==883:
	vod(url)
elif mode==8866:
	countrys()
elif mode==8867:
	listregion(url)
elif mode==8868:
	stations(url)
elif mode==88767:
	sportscatch2(url)
elif mode==2002:
	fav22(url)
elif mode==3655:
	vod3(url)
elif mode==846:
	rec(pillow,url,fanart)
elif mode == 6668:
	playall()
exec pipcan('eGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pKQ==')
